(this["webpackJsonpabstract-art"]=this["webpackJsonpabstract-art"]||[]).push([[0],{20:function(e,t,n){},27:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(7),o=n.n(i),a=(n(20),n(3)),c=n(10);function s(e){return{textSource:e,selected:!1}}var l,u=Object(c.b)({name:"gallery",initialState:{art:[],settings:{highDpiSupport:!0}},reducers:{addArt:function(e,t){e.art.push(s(t.payload.newSource))},editArt:function(e,t){e.art[t.payload.index].textSource=t.payload.newSource},setAllArt:function(e,t){e.art=t.payload.newArt},deleteArt:function(e,t){e.art.splice(t.payload.index,1)},toggleSelected:function(e,t){e.art[t.payload.index].selected=!e.art[t.payload.index].selected},updateSettings:function(e,t){e.settings=t.payload.newSettings}}}),g=u.actions,p=(g.addArt,g.editArt,g.setAllArt),f=(g.deleteArt,g.toggleSelected),v=g.updateSettings,h=function(e){return e.gallery.art},O=function(e){return e.gallery.settings},m=u.reducer,d=(n(27),n(15)),y=n(8),P=n(9),_=n(6),x=n(2);function A(e){return function(t){return e}}function b(e){return function(t){return"".concat(e,"(").concat(t.args.map((function(e){return S(e)})).join(", "),")")}}function E(e){return function(t){return"(".concat(t.args.map((function(e){return S(e)})).join(e),")")}}function S(e){return R(e.type).glslEmitter(e)}!function(e){e.CONST="CONST",e.CONST_PI="CONST_PI",e.CONST_TAU="CONST_TAU",e.CONST_E="CONST_E",e.CONST_PHI="CONST_PHI",e.VAR_X="VAR_X",e.VAR_Y="VAR_Y",e.VAR_T="VAR_T",e.OP_INV="OP_INV",e.OP_ABS="OP_ABS",e.OP_ADD="OP_ADD",e.OP_SUB="OP_SUB",e.OP_MUL="OP_MUL",e.OP_DIV="OP_DIV",e.OP_MOD="OP_MOD",e.OP_DOT="OP_DOT",e.OP_CROSS="OP_CROSS",e.OP_SQRT="OP_SQRT",e.OP_POW="OP_POW",e.OP_EXP="OP_EXP",e.OP_LOG="OP_LOG",e.OP_LN="OP_LN",e.OP_SIN="OP_SIN",e.OP_COS="OP_COS",e.OP_TAN="OP_TAN",e.OP_FLOOR="OP_FLOOR",e.OP_CEIL="OP_CEIL",e.OP_ROUND="OP_ROUND",e.OP_TRUNC="OP_TRUNC",e.OP_MIN="OP_MIN",e.OP_MAX="OP_MAX",e.OP_CLIP="OP_CLIP",e.OP_WRAP="OP_WRAP",e.OP_USHIFT="OP_USHIFT",e.OP_BLEND="OP_BLEND",e.OP_V="OP_V",e.OP_RGB="OP_RGB",e.OP_BW="OP_BW",e.OP_NOISE2D="OP_NOISE2D"}(l||(l={}));var w,L=x.a.of({type:l.CONST,numArgs:0,tokenRegExp:/^-?\d+(\.\d+)?$/,glslEmitter:function(e){return"vec3(".concat(e.name,", ").concat(e.name,", ").concat(e.name,")")}},{type:l.CONST_PI,numArgs:0,tokenLiteral:"pi",glslEmitter:A("PI")},{type:l.CONST_TAU,numArgs:0,tokenLiteral:"tau",glslEmitter:A("TAU")},{type:l.CONST_E,numArgs:0,tokenLiteral:"e",glslEmitter:A("E")},{type:l.CONST_PHI,numArgs:0,tokenLiteral:"phi",glslEmitter:A("PHI")},{type:l.VAR_X,numArgs:0,tokenLiteral:"x",glslEmitter:A("x")},{type:l.VAR_Y,numArgs:0,tokenLiteral:"y",glslEmitter:A("y")},{type:l.VAR_T,numArgs:0,tokenLiteral:"t",glslEmitter:A("t")},{type:l.OP_INV,numArgs:1,tokenLiteral:"inv",glslEmitter:b("inv")},{type:l.OP_ABS,numArgs:1,tokenLiteral:"abs",glslEmitter:b("abs")},{type:l.OP_ADD,numArgs:2,tokenLiteral:"+",glslEmitter:E("+")},{type:l.OP_SUB,numArgs:2,tokenLiteral:"-",glslEmitter:E("-")},{type:l.OP_MUL,numArgs:2,tokenLiteral:"*",glslEmitter:E("*")},{type:l.OP_DIV,numArgs:2,tokenLiteral:"/",glslEmitter:E("/")},{type:l.OP_MOD,numArgs:2,tokenLiteral:"%",glslEmitter:b("mod")},{type:l.OP_DOT,numArgs:2,tokenLiteral:"dot",glslEmitter:b("dotp")},{type:l.OP_CROSS,numArgs:2,tokenLiteral:"cross",glslEmitter:b("cross")},{type:l.OP_SQRT,numArgs:1,tokenLiteral:"sqrt",glslEmitter:b("sqrt")},{type:l.OP_POW,numArgs:2,tokenLiteral:"pow",glslEmitter:b("pow")},{type:l.OP_EXP,numArgs:1,tokenLiteral:"exp",glslEmitter:b("exp")},{type:l.OP_LOG,numArgs:2,tokenLiteral:"log",glslEmitter:b("logb")},{type:l.OP_LN,numArgs:1,tokenLiteral:"ln",glslEmitter:b("log")},{type:l.OP_SIN,numArgs:1,tokenLiteral:"sin",glslEmitter:b("sin")},{type:l.OP_COS,numArgs:1,tokenLiteral:"cos",glslEmitter:b("cos")},{type:l.OP_TAN,numArgs:1,tokenLiteral:"tan",glslEmitter:b("tan")},{type:l.OP_FLOOR,numArgs:1,tokenLiteral:"floor",glslEmitter:b("floor")},{type:l.OP_CEIL,numArgs:1,tokenLiteral:"ceil",glslEmitter:b("ceil")},{type:l.OP_ROUND,numArgs:1,tokenLiteral:"round",glslEmitter:b("round")},{type:l.OP_TRUNC,numArgs:1,tokenLiteral:"trunc",glslEmitter:b("trunc")},{type:l.OP_MIN,numArgs:2,tokenLiteral:"min",glslEmitter:b("min")},{type:l.OP_MAX,numArgs:2,tokenLiteral:"max",glslEmitter:b("max")},{type:l.OP_CLIP,numArgs:1,tokenLiteral:"clip",glslEmitter:b("clip")},{type:l.OP_WRAP,numArgs:1,tokenLiteral:"wrap",glslEmitter:b("wrap")},{type:l.OP_USHIFT,numArgs:1,tokenLiteral:"ushift",glslEmitter:b("ushift")},{type:l.OP_BLEND,numArgs:3,tokenLiteral:"blend",glslEmitter:b("blend")},{type:l.OP_V,numArgs:3,tokenLiteral:"v",glslEmitter:b("rgb")},{type:l.OP_RGB,numArgs:3,tokenLiteral:"rgb",glslEmitter:b("rgb")},{type:l.OP_BW,numArgs:1,tokenLiteral:"bw",glslEmitter:b("bw")},{type:l.OP_NOISE2D,numArgs:2,tokenLiteral:"noise2d",glslEmitter:b("snoise2d")}),j=L.toMap().mapKeys((function(e,t){return t.type})),k=j.filter((function(e,t){return void 0!==e.tokenLiteral})).mapKeys((function(e,t){return t.tokenLiteral})),T=L.filter((function(e){return void 0!==e.tokenRegExp}));function R(e){return j.get(e)}function N(e){var t=function(e){var t=k.get(e);if(void 0!==t)return t;var n,r=Object(_.a)(T);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.tokenRegExp.test(e))return i}}catch(o){r.e(o)}finally{r.f()}}(e);if(t)return{type:w.TERMINAL,val:e,terminalMetadata:t}}function C(e){return/^\s+$/.test(e)}function I(e){return"("===e}function D(e){return")"===e}!function(e){e.PAREN_OPEN="PAREN_OPEN",e.PAREN_CLOSE="PAREN_CLOSE",e.TERMINAL="TERMINAL"}(w||(w={}));var F=function(){function e(t){Object(y.a)(this,e),this.input=void 0,this.index=void 0,this.input=t,this.index=0}return Object(P.a)(e,[{key:"nextChar",value:function(){if(!(this.index>=this.input.length))return this.input.charAt(this.index++)}},{key:"prevChar",value:function(){if(this.index<=0)throw Error("Scan error: prevChar() attempted on scanner at index ".concat(this.index,"."));this.index--}},{key:"skipWhitespace",value:function(){var e;do{e=this.nextChar()}while(void 0!==e&&C(e));return e}},{key:"nextToken",value:function(){var e=this.skipWhitespace();if(void 0!==e){if(I(e))return{type:w.PAREN_OPEN,val:"("};if(D(e))return{type:w.PAREN_CLOSE,val:")"};for(var t,n=!1;!n;){var r=this.nextChar();if(void 0===r||C(r)){n=!0;break}if(I(t=r)||D(t)){this.prevChar(),n=!0;break}e+=r}return N(e)}}}]),e}(),M=n(11);function U(e,t){return Math.floor(function(e,t){if(t<e)throw new Error("Invalid range [".concat(e,", ").concat(t,")"));return e+Math.random()*(t-e)}(Math.floor(e),Math.floor(t)))}function B(e){return U(0,e)}var V=function(){function e(t,n,r){Object(y.a)(this,e),this.type=void 0,this.name=void 0,this.args=void 0,this.size=void 0,this.type=t,this.name=n,this.args=r,this.size=r.map((function(e){return e.size})).reduce((function(e,t){return e+t}),1)}return Object(P.a)(e,[{key:"toString",value:function(){return this.flatten().map((function(e){return e.name})).join(" ")}},{key:"mapArgs",value:function(t){return new e(this.type,this.name,this.args.map((function(e){return t(e)})))}},{key:"findPath",value:function(e){if(!(e<0||e>=this.size)){if(0===e)return[0];var t,n=e-1,r=1,i=Object(_.a)(this.args);try{var o=function(){var e=t.value,i=r,o=e.findPath(n);if(void 0!==o){var a=o.map((function(e){return e+i}));return{v:[0].concat(Object(M.a)(a))}}n-=e.size,r+=e.size};for(i.s();!(t=i.n()).done;){var a=o();if("object"===typeof a)return a.v}}catch(c){i.e(c)}finally{i.f()}}}},{key:"nearestCommonAncestor",value:function(e,t){var n=this.findPath(e),r=this.findPath(t);if(void 0!==n&&void 0!==r){for(var i=r.length-1,o=n.length-1;o>=0;o--){for(;i>0&&r[i]>n[o];)i--;if(n[o]===r[i])return n[o]}return 0}}},{key:"flatten",value:function(){return x.a.of(this).concat(this.args.flatMap((function(e){return e.flatten()})))}},{key:"get",value:function(e){return this.flatten().get(e)}},{key:"set",value:function(t,n){if(t<0||t>=this.size)return this;if(0===t)return n;var r,i=t-1,o=[],a=Object(_.a)(this.args);try{for(a.s();!(r=a.n()).done;){var c=r.value;o.push(c.set(i,n)),i-=c.size}}catch(s){a.e(s)}finally{a.f()}return new e(this.type,this.name,x.a.of.apply(x.a,o))}},{key:"randomSubExpression",value:function(){return B(this.size)}},{key:"randomSubExpressionAncestorWeighted",value:function(){var e=B(this.size),t=B(this.size);return this.nearestCommonAncestor(e,t)}}]),e}();function H(e){var t=new F(e),n=z(t);return function(e){var t=e.nextToken();if(void 0!==t)throw Error('Parse error: Expected end of expression, found "'.concat(t.val,'"'))}(t),n}function z(e){var t=e.nextToken();if(void 0===t)throw Error("Parse error: Expected expression, found none.");if(t.type===w.PAREN_OPEN){var n=z(e);return function(e,t){var n=e.nextToken();if(void 0===n)throw Error("Parse error: Expected token of type ".concat(t,", found none."));if(n.type!==t)throw Error("Parse error: Expected token of type ".concat(t,", found token of type ").concat(n.type,"."))}(e,w.PAREN_CLOSE),n}if(t.type===w.TERMINAL)return function(e,t){if(e.type!==w.TERMINAL||!e.terminalMetadata)throw Error("Parse error: Invalid TERMINAL token ".concat(e));for(var n=[],r=0;r<e.terminalMetadata.numArgs;r++)n.push(z(t));return new V(e.terminalMetadata.type,e.val,x.a.of.apply(x.a,n))}(t,e);throw Error("Parse error: Unexpected token: ".concat(t,"."))}function G(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(console.error("Failed to compile ".concat(t===e.FRAGMENT_SHADER?"FRAGMENT_SHADER":t===e.VERTEX_SHADER?"VERTEX_SHADER":"UNKNOWN SHADER TYPE",":")),console.error(n),console.error(e.getShaderInfoLog(r)),e.deleteShader(r),null)}var W=n(1);function X(e){var t=Object(r.createRef)(),n=Object(r.useState)(null),i=Object(d.a)(n,2),o=i[0],c=i[1],s=Object(a.c)(O),l=Object(a.b)(),u=e.getGlContext(),g=e.art.textSource,p=e.getTime;return Object(r.useEffect)((function(){if(null!==u){console.log("Recompiling...");var e=H(g),t="#define F_PI 3.14159\n#define F_TAU 6.28318\n#define F_E 2.71828\n#define F_PHI 1.61803\n\n#define PI vec3(F_PI, F_PI, F_PI)\n#define TAU vec3(F_TAU, F_TAU, F_TAU)\n#define E vec3(F_E, F_E, F_E)\n#define PHI vec3(F_PHI, F_PHI, F_PHI)\n\nprecision highp float;\n\n// (x, y) coordinates expected to be varying from [-1, 1]\nvarying vec2 pos;\n// time expected to be varying from [0, 1]\nuniform float time;\n\nfloat rand(vec2 c){\n    return fract(sin(dot(c.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\n//\n// Description : Array and textureless GLSL 2D simplex noise function.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : stegu\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//               https://github.com/stegu/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec2 mod289(vec2 x) {\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 permute(vec3 x) {\n    return mod289(((x*34.0)+10.0)*x);\n}\n\nfloat snoise(vec2 v) {\n    const vec4 C = vec4(0.211324865405187, // (3.0-sqrt(3.0))/6.0\n    0.366025403784439, // 0.5*(sqrt(3.0)-1.0)\n    -0.577350269189626, // -1.0 + 2.0 * C.x\n    0.024390243902439);// 1.0 / 41.0\n    // First corner\n    vec2 i  = floor(v + dot(v, C.yy));\n    vec2 x0 = v -   i + dot(i, C.xx);\n\n    // Other corners\n    vec2 i1;\n    //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n    //i1.y = 1.0 - i1.x;\n    i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n    // x0 = x0 - 0.0 + 0.0 * C.xx ;\n    // x1 = x0 - i1 + 1.0 * C.xx ;\n    // x2 = x0 - 1.0 + 2.0 * C.xx ;\n    vec4 x12 = x0.xyxy + C.xxzz;\n    x12.xy -= i1;\n\n    // Permutations\n    i = mod289(i);// Avoid truncation effects in permutation\n    vec3 p = permute(permute(i.y + vec3(0.0, i1.y, 1.0))\n    + i.x + vec3(0.0, i1.x, 1.0));\n\n    vec3 m = max(0.5 - vec3(dot(x0, x0), dot(x12.xy, x12.xy), dot(x12.zw, x12.zw)), 0.0);\n    m = m*m;\n    m = m*m;\n\n    // Gradients: 41 points uniformly over a line, mapped onto a diamond.\n    // The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n\n    vec3 x = 2.0 * fract(p * C.www) - 1.0;\n    vec3 h = abs(x) - 0.5;\n    vec3 ox = floor(x + 0.5);\n    vec3 a0 = x - ox;\n\n    // Normalise gradients implicitly by scaling m\n    // Approximation of: m *= inversesqrt( a0*a0 + h*h );\n    m *= 1.79284291400159 - 0.85373472095314 * (a0*a0 + h*h);\n\n    // Compute final noise value at P\n    vec3 g;\n    g.x  = a0.x  * x0.x  + h.x  * x0.y;\n    g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n    return 130.0 * dot(m, g);\n}\n\n// End Simplex noise from https://github.com/stegu/webgl-noise\n\nvec3 snoise2d(vec3 a, vec3 b) {\n    return vec3(snoise(vec2(a.x, b.x)), snoise(vec2(a.y, b.y)), snoise(vec2(a.z, b.z)));\n}\n\nvec3 expression(vec3 x, vec3 y, vec3 t);\n\nvec3 inv(vec3 v) {\n    return -v;\n}\n\nvec3 dotp(vec3 a, vec3 b) {\n    return vec3(dot(a, b));\n}\n\nvec3 logb(vec3 x, vec3 b) {\n    return log(x) / log(b);\n}\n\nvec3 round(vec3 v) {\n    return floor(0.5 + v);\n}\n\nvec3 trunc(vec3 v) {\n    return vec3(int(v.x), int(v.y), int(v.z));\n}\n\nvec3 clip(vec3 v) {\n    return max(min(v, 1.0), -1.0);\n}\n\nvec3 wrap(vec3 v) {\n    return mod(v + 1.0, vec3(3.0)) - 1.0;\n}\n\nvec3 ushift(vec3 v) {\n    return (v + 1.0) / 2.0;\n}\n\n// fac * a + (1 - fac) * b\n// TODO: Consider clipping fac to [0, 1]\nvec3 blend(vec3 a, vec3 b, vec3 fac) {\n    return (fac * a) + ((vec3(1.0) - fac) * b);\n}\n\nvec3 rgb(vec3 r, vec3 g, vec3 b) {\n    return vec3(r.x, g.x, b.x);\n}\n\nvec3 bw(vec3 rgb) {\n    return vec3(0.3 * rgb.x + 0.59 * rgb.y + 0.11 * rgb.z);\n}\n\nvoid main() {\n    vec3 x = vec3(pos.x);\n    vec3 y = vec3(pos.y);\n    vec3 t = vec3(time, time, time);\n    vec3 rgb = expression(x, y, t);\n    gl_FragColor = vec4(rgb, 1.0);\n}"+"\nvec3 expression(vec3 x, vec3 y, vec3 t) {\n    return ".concat(S(e),";\n}\n");c(function(e,t,n){var r=e.createProgram(),i=G(e,e.VERTEX_SHADER,n||"precision highp float;\n\nattribute vec2 xy_pos;\nvarying vec2 pos;\nvoid main() {\n    pos = xy_pos;\n    gl_Position = vec4(xy_pos, 0, 1);\n}"),o=G(e,e.FRAGMENT_SHADER,t||"precision highp float;\n\nvoid main() {\n    gl_FragColor = vec4(1, 0, 1, 1);\n}");return i&&o?(e.attachShader(r,i),e.attachShader(r,o),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS)?r:(console.error("Failed to create GL program:"),console.error(e.getProgramInfoLog(r)),e.deleteProgram(r),null)):(e.deleteProgram(r),null)}(u,t))}}),[u,g]),Object(r.useEffect)((function(){if(null!==u){var e=u.canvas,n=0;return n=requestAnimationFrame((function r(){if(null!==t.current){var i=t.current.getBoundingClientRect();if(!(i.bottom<0||i.top>e.clientHeight||i.right<0||i.left>e.clientWidth)){var a=i.right-i.left,c=i.bottom-i.top,l=i.left-8,g=e.clientHeight-i.bottom,f=s.highDpiSupport&&window.devicePixelRatio||1;u.viewport(l*f,g*f,a*f,c*f),u.scissor(l*f,g*f,a*f,c*f),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.useProgram(o);var v=u.getUniformLocation(o,"time");u.uniform1f(v,p());var h=u.getAttribLocation(o,"xy_pos");u.vertexAttribPointer(h,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(h),u.drawArrays(u.TRIANGLE_STRIP,0,4)}n=requestAnimationFrame(r)}})),function(){cancelAnimationFrame(n)}}}),[s.highDpiSupport,t,u,o,p]),Object(W.jsx)("div",{className:"ArtFrame"+(e.art.selected?" Selected":" Deselected"),children:Object(W.jsx)("div",{ref:t,className:"ArtFrameClickTarget",onClick:function(){return l(f({index:e.index}))}})})}var q=[{type:l.CONST,weight:1},{type:l.VAR_X,weight:1},{type:l.VAR_Y,weight:1},{type:l.VAR_T,weight:2},{type:l.OP_INV,weight:1},{type:l.OP_ABS,weight:1},{type:l.OP_ADD,weight:1},{type:l.OP_SUB,weight:1},{type:l.OP_MUL,weight:1},{type:l.OP_DIV,weight:1},{type:l.OP_MOD,weight:1},{type:l.OP_DOT,weight:1},{type:l.OP_CROSS,weight:1},{type:l.OP_SQRT,weight:1},{type:l.OP_POW,weight:1},{type:l.OP_EXP,weight:1},{type:l.OP_LOG,weight:1},{type:l.OP_LN,weight:1},{type:l.OP_SIN,weight:1},{type:l.OP_COS,weight:1},{type:l.OP_TAN,weight:1},{type:l.OP_FLOOR,weight:1},{type:l.OP_CEIL,weight:1},{type:l.OP_ROUND,weight:1},{type:l.OP_TRUNC,weight:1},{type:l.OP_MIN,weight:1},{type:l.OP_MAX,weight:1},{type:l.OP_CLIP,weight:1},{type:l.OP_WRAP,weight:1},{type:l.OP_USHIFT,weight:1},{type:l.OP_BLEND,weight:1},{type:l.OP_V,weight:1},{type:l.OP_RGB,weight:2},{type:l.OP_BW,weight:1},{type:l.OP_NOISE2D,weight:2}];function Y(e){for(var t=[e[0]],n=1;n<e.length;n++)t.push({type:e[n].type,weight:t[n-1].weight+e[n].weight});return t}var K=Y(q),Q=function(e){if(0===e.length)return[[]];for(var t=[],n=Math.max.apply(Math,Object(M.a)(e.map((function(e){return R(e.type).numArgs})))),r=function(e){var n=Y(q.filter((function(t){var n;return(null===(n=R(t.type))||void 0===n?void 0:n.numArgs)===e})));t.push(n)},i=0;i<=n;i++)r(i);return t}(q);function J(e){if(0!==e.length){for(var t=e[e.length-1].weight,n=Math.random()*t,r=0;r<e.length;r++)if(n<=e[r].weight)return e[r].type;throw new Error("Whoops, fell through chooseWeighted.")}}function $(e,t){var n=Math.random()*Math.abs(t-e)+Math.min(e,t);return new V(l.CONST,n.toString(),x.a.of())}function Z(e){if(e<=0)throw new Error("Invalid random expression depth.");var t,n=R(t=J(1===e?Q[0]:K));if(void 0===n.tokenLiteral)return $(-10,10);for(var r=[],i=0;i<n.numArgs;i++)r.push(Z(e-1));return new V(t,n.tokenLiteral,x.a.of.apply(x.a,r))}function ee(e,t){var n=e.randomSubExpressionAncestorWeighted(),r=t.randomSubExpressionAncestorWeighted();return e.set(n,t.get(r))}function te(e){var t=Math.random(),n=e;return t<.99||t<1&&(n=function(e){var t=J(Q[e.args.size]);if(void 0===t)return e;var n=R(t);if(n.numArgs!==e.args.size)throw new Error("Arity mismatch during substitution mutation.");return void 0===n.tokenLiteral?$(-10,10):new V(t,n.tokenLiteral,e.args)}(e)),n.mapArgs(te)}function ne(e){var t=Object(r.useRef)(0),n=Object(a.c)(O),i=Object(a.c)(h),o=Object(a.c)(h).map((function(n,r){return Object(W.jsx)(X,{art:n,index:r,getTime:function(){return t.current},getGlContext:e.getGlContext})})),c=Object(a.b)(),l=e.getGlContext();return Object(r.useEffect)((function(){if(null!==l){var e=0,r=performance.now(),i=l.canvas,o=l.createBuffer(),a=new Float32Array([-1,1,-1,-1,1,1,1,-1]);return l.bindBuffer(l.ARRAY_BUFFER,o),l.bufferData(l.ARRAY_BUFFER,a,l.STATIC_DRAW),e=requestAnimationFrame((function o(){t.current=(performance.now()-r)/1e3/5%1,function(e,t){var n=t&&window.devicePixelRatio||1,r=e.clientWidth*n,i=e.clientHeight*n,o=e.width!==r||e.height!==i;o&&(e.width=r,e.height=i)}(i,n.highDpiSupport),l.enable(l.CULL_FACE),l.enable(l.DEPTH_TEST),l.enable(l.SCISSOR_TEST),l.canvas.style.transform="translateY(".concat(window.scrollY,"px) translateX(").concat(window.scrollX,"px)"),e=requestAnimationFrame(o)})),function(){cancelAnimationFrame(e)}}}),[l,n.highDpiSupport]),Object(W.jsxs)("div",{className:"Gallery",children:[Object(W.jsx)("div",{className:"Instructions",children:Object(W.jsxs)("div",{children:['Select expressions you like by clicking on them. Press "Breed selected" to breed the selected expressions together randomly.',Object(W.jsx)("br",{}),Object(W.jsx)("br",{}),'If you don\'t like any of the expressions then press "Start over" to get new ones.',Object(W.jsx)("br",{}),Object(W.jsx)("br",{})]})}),Object(W.jsxs)("div",{className:"Controls",style:{display:"flex"},children:[Object(W.jsx)("button",{onClick:function(){c(p({newArt:re()}))},children:"Start over"}),Object(W.jsx)("button",{onClick:function(){var e=i.filter((function(e,t){return e.selected})).map((function(e){return H(e.textSource)}));if(0!==e.length){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t<0&&(t=e.length);for(var n=[],r=0;r<t;r++){var i=e[B(e.length)],o=e[B(e.length)];n.push(te(ee(i,o)))}return n}(e,i.length).map((function(e,t){return s(e.toString())}));c(p({newArt:t}))}},children:"Breed selected"})]}),Object(W.jsx)("div",{className:"GalleryFlow",style:{display:"flex",flexWrap:"wrap"},children:o.map((function(e,t){return Object(W.jsx)("div",{children:e},t.toString())}))})]})}n(29);function re(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,t=[],n=0;n<e;n++)t.push(s(Z(10).toString()));return t}function ie(){var e=Object(r.useRef)(null),t=Object(a.c)(O),n=Object(a.b)();return Object(r.useEffect)((function(){n(p({newArt:re()}))}),[n]),Object(W.jsxs)("div",{children:[Object(W.jsx)("canvas",{ref:e,id:"glCanvas"}),Object(W.jsx)(ne,{getGlContext:function(){return null===e.current?null:e.current.getContext("webgl",{antialias:!1})}}),Object(W.jsxs)("div",{children:[Object(W.jsx)("i",{children:'"This art may not make sense to you. It makes Ness sleepy just thinking about it. Use Paralysis to knock some sense into the painting."'}),Object(W.jsx)("br",{}),"\u2014 EarthBound Player's Guide"]}),Object(W.jsx)("br",{}),Object(W.jsx)("div",{style:{color:"yellow"},children:"UX developer wanted :)"}),Object(W.jsx)("div",{style:{color:"blue"},children:Object(W.jsx)("a",{href:"https://github.com/mbh95/abstract-art",children:"GitHub repo"})}),Object(W.jsx)("input",{type:"checkbox",name:"highdpi",onChange:function(e){return n(v({newSettings:{highDpiSupport:e.target.checked}}))},checked:t.highDpiSupport}),Object(W.jsx)("label",{htmlFor:"highdpi",children:"High DPI Support"})]})}var oe=Object(c.a)({reducer:{gallery:m}});o.a.render(Object(W.jsx)(a.a,{store:oe,children:Object(W.jsx)(ie,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.a471954e.chunk.js.map